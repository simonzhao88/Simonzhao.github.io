{"title":"Django使用自带的admin管理后台","slug":"django使用自带的admin管理后台","date":"2018-05-20T08:16:55.000Z","updated":"2018-06-25T09:11:18.377Z","comments":true,"path":"api/articles/django使用自带的admin管理后台.json","photos":[],"link":"","excerpt":"Django使用自带的admin管理后台前言Django框架是十分的强大的，利用其它框架，我们可能要自己去实现后台管理，但是Django直接就已经集成了管理后台，在管理后台中我们可以对自定义model进行CRUD操作，也能进行列表展示解析，分页等等使用admin管理后台1.在model中定义Student的模型","covers":null,"content":"<h1 id=\"Django使用自带的admin管理后台\"><a href=\"#Django使用自带的admin管理后台\" class=\"headerlink\" title=\"Django使用自带的admin管理后台\"></a>Django使用自带的admin管理后台</h1><h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>Django框架是十分的强大的，利用其它框架，我们可能要自己去实现后台管理，但是Django直接就已经集成了管理后台，在管理后台中我们可以对自定义model进行CRUD操作，也能进行列表展示解析，分页等等</p>\n<h3 id=\"使用admin管理后台\"><a href=\"#使用admin管理后台\" class=\"headerlink\" title=\"使用admin管理后台\"></a>使用admin管理后台</h3><p><strong>1.在model中定义Student的模型</strong></p>\n<a id=\"more\"></a>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Students</span><span class=\"params\">(models.Model)</span>:</span></span><br><span class=\"line\">    name = models.CharField(max_length=<span class=\"number\">10</span>)</span><br><span class=\"line\">    sex = models.BooleanField()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Meta</span>:</span></span><br><span class=\"line\">        db_table = <span class=\"string\">'student'</span></span><br></pre></td></tr></table></figure>\n<p><strong>2.配置admin管理后台的url</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在工程目录下可以看到路由配置中有一个admin的url地址</span></span><br><span class=\"line\"></span><br><span class=\"line\">url(<span class=\"string\">r'^admin/'</span>, admin.site.urls),</span><br></pre></td></tr></table></figure>\n<p><strong>3.创建admin后台的用户密码</strong></p>\n<p>在控制台使用命令<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python manage.py createsuperuser</span><br></pre></td></tr></table></figure></p>\n<p><strong>4.继承admin.ModelAdmin，编写自定义的admin</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在管理后台中操作模型对象。需要在app的admin.py中创建模型</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StudentAdmin</span><span class=\"params\">(admin.ModelAdmin)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">set_sex</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.sex:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">'男'</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">'女'</span></span><br><span class=\"line\">    set_sex.short_description = <span class=\"string\">'性别'</span></span><br><span class=\"line\">    list_display = [<span class=\"string\">'id'</span>, <span class=\"string\">'name'</span>, set_sex]</span><br><span class=\"line\">    list_filter = [<span class=\"string\">'sex'</span>]</span><br><span class=\"line\">    search_fields = [<span class=\"string\">'name'</span>]</span><br><span class=\"line\">    list_per_page = <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<p><strong>5.在登录后的管理后台注册</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在管理后台中操作模型对象。需要在app的admin.py中写如下代码</span></span><br><span class=\"line\"></span><br><span class=\"line\">admin.site.register(模型名)</span><br></pre></td></tr></table></figure>\n<p><strong>或者使用装饰器实现注册</strong><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@admin.register(StudentAdmin)</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StudentAdmin</span><span class=\"params\">(admin.ModelAdmin)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">set_sex</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.sex:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">'男'</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">'女'</span></span><br><span class=\"line\">    set_sex.short_description = <span class=\"string\">'性别'</span></span><br><span class=\"line\">    list_display = [<span class=\"string\">'id'</span>, <span class=\"string\">'name'</span>, set_sex]</span><br><span class=\"line\">    list_filter = [<span class=\"string\">'sex'</span>]</span><br><span class=\"line\">    search_fields = [<span class=\"string\">'name'</span>]</span><br><span class=\"line\">    list_per_page = <span class=\"number\">1</span></span><br></pre></td></tr></table></figure></p>\n","categories":[{"name":"Django","slug":"Django","count":5,"path":"api/categories/Django.json"}],"tags":[{"name":"Django","slug":"Django","count":5,"path":"api/tags/Django.json"}]}